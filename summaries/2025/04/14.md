# Activity Summary for 14/04/2025

## 12:14:47
The `/Users/dennisabonda/Desktop/projects/payroll-central-api/models/users.js` file, last updated on 14/04/2025 at 11:14:48, defines a Mongoose schema for users.  The schema includes a wide range of fields covering personal information (name, email, contact details), employment details (contract type, employment type, date of joining, salary),  access control (roles, tokens), security (password hashing, login attempts), and various other attributes like company ID, attachments, and  leaves.

Significant features include:

* **Password Hashing:**  The schema uses `bcrypt` to hash passwords before saving and on updates.
* **JWT Authentication:** It utilizes `jsonwebtoken` for generating access and refresh tokens (`generateAuthToken`, `generateAuthTokens`).  Token expiration is managed using `moment.js`.
* **Role-Based Access Control:** The schema includes numerous methods (`checkIsAdmin`, `checkIsSuperAdmin`, `checkIsClientAdmin`, etc.) to check a user's role (`role_ID`) and grant access accordingly.  Specific `role_ID` values define different roles (e.g., Admin, Super Admin, HR, Employee).
* **Session Management:** The `startSession` method uses `uuidv4` to create and save user sessions.
* **Login Security:**  The `findByCredentials` static method verifies user credentials and includes checks for inactive users and restricted access based on roles.  It also handles unsuccessful login attempts.
* **Extensive Data Storage:** The schema demonstrates a comprehensive design, storing a wide variety of user-related data in various formats (String, Number, Object, Array, Map).

The code uses several external libraries: `mongoose`, `bcryptjs`, `jsonwebtoken`, `moment`, and `uuid`.  The repeated pattern of `checkIs[Role]` methods suggests a potential area for refactoring into a more generic role-checking mechanism.
